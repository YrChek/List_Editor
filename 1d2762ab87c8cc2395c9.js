import"core-js/modules/es.number.constructor.js";import DB from"./db";import Rendering from"./rendering";import Popup from"./popup";document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".titleBoxing-icon"),t=document.querySelector(".containerNotes"),n=Number(localStorage.getItem(0)),o=new Rendering("containerNotes"),r=new Popup("sharedContainer");n&&(DB.id=n);var i=DB.allDBentries();o.dataRendering(i),e.addEventListener("click",(function(){r.formsWidget(),r.eventsPopup()})),t.addEventListener("click",(function(e){var t=e.target;if(t.classList.contains("note-icon-edit")){var n=t.closest(".note"),c=Number(n.id),a=n.querySelector(".name").textContent,d=Number(n.querySelector(".price").textContent);r.formsWidget();var s=document.querySelector(".popup");s.setAttribute("data-id",c);var u=s.querySelector(".form-name"),l=s.querySelector(".form-price");u.value=a,l.value=d,r.eventsPopup()}if(t.classList.contains("note-icon-del")){var m=t.closest(".note"),p=m.id,f=m.querySelector(".name"),v=m.querySelector(".price");v.classList.add("del"),f.textContent="",v.textContent="Запись удалена",DB.delDbNote(p),i=DB.allDBentries(),setTimeout((function(){o.deletingNotes(),o.dataRendering(i)}),500)}}))})),window.addEventListener("beforeunload",(function(){localStorage.setItem(0,DB.id)}));